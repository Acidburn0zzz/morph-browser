name: webbrowser-app
version: 20170104-staging
summary: Ubuntu web browser
description: A lightweight web browser tailored for Ubuntu, based on the Oxide browser engine and using the Ubuntu UI components.
confinement: strict

apps:
  webbrowser-app:
    command: webbrowser-app.launcher
    plugs:
      - browser-sandbox
      - camera
      - network
      - network-bind
      - opengl
      - platform
      - pulseaudio
      - screen-inhibit-control
      - unity7

plugs:
  browser-sandbox:
    interface: browser-support
    allow-sandbox: true
  platform:
    content: ubuntu-app-platform1
    default-provider: ubuntu-app-platform
    interface: content
    target: ubuntu-app-platform

parts:
  webbrowser-app:
    plugin: cmake
    source: .
    build-packages:
      - intltool
      - libapparmor-dev
      - libevdev-dev
      - libudev-dev
      - lsb-release
      - pkg-config
      - qt5-default
      - qt5-qmake
      - qtbase5-dev
      - qtbase5-dev-tools
      - qtbase5-private-dev
      - qtdeclarative5-dev
      - qttools5-dev-tools
      - xvfb
    stage-packages:
      - fonts-liberation
    after: [desktop-ubuntu-app-platform]
    snap:
      - bin/webbrowser-app
      - share/content-hub/peers/webbrowser-app
      - share/locale
      - share/url-dispatcher/urls/webbrowser-app.url-dispatcher
      - share/webbrowser-app/actions
      - share/webbrowser-app/webbrowser
      - share/webbrowser-app/*.js
      - share/webbrowser-app/*.png
      - share/webbrowser-app/*.qml
      - usr/lib/*/qt5/qml/Ubuntu/Web
      - usr/share/fonts

  launcher:
    plugin: dump
    source: snap
    organize:
      webbrowser-app.launcher: bin/webbrowser-app.launcher
